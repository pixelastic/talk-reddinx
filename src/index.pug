//- ---
//- title: Index
//- ---

block content
  +slide.bg-green.debug
    .flex.h-100p.flex-center
      .text-10 reddinx

  +slide
    +title Who am I?
    .flex.h-100p.flex-center
      .flex-none.flex.flex-row
        .flex-auto.text-right
          .text-6.mb-3 Tim Carry
          .text-4.gray-7 Full-Stack Engineer at #[img.h-6.inline-block(src="./assets/images/doctolib.png")]
          .text-3.gray-6 Previously at #[img.h-6.inline-block(src="./assets/images/algolia.png")]
          .text-6.green.mt-3
            .inline @
            .inline.underline.text-shadow pixelastic
        .flex-auto.ml-4
            img.h-20.rounded-full(src=`./assets/images/avatar.jpg`, alt="Tim Carry")
    .notes
      p Used to work here
      p Actually, used to co-organize this event, so very happy to be able to be part of it again

  +slide
    .absolute.inset-0.z-0
      .absolute.inset-0.bg-cover(style="background-image:url('./assets/images/gm.jpg')")
      .absolute.inset-0.bg-black.bg-opacity-50p
    .flex.flex-col.z-1.h-100p
      .flex.justify-center
        img.h-15.mt-5(src="./assets/images/dndlogo.png")
      .flex.flex-auto.flex-row.items-center.justify-around(data-step)
        .fln
          img.rounded.w-13(src="./assets/images/map4.png")
        .fln
          img.rounded.w-13(src="./assets/images/map3.png")
        .fln
          img.rounded.w-13(src="./assets/images/map5.png")
        .fln
          img.rounded.w-13(src="./assets/images/map6.png")
        .fln
          img.rounded.w-13(src="./assets/images/map7.png")
        .fln
          img.rounded.w-13(src="./assets/images/map2.png")
    .notes
      p I also love to gather a bunch of friends, sit around and play Dungeons & Dragons
      p As the gamemaster, I like to create stories to engage my players
      p Have them in fantastic locations, like in a flying city, in the heart of a volcano or a haunted manor
      p Great way to spark the imagination is to have a map to share

  +slide
    +title reddit.com/r/dndmaps ðŸ’Ž
    .flex.h-100p.flex-row
      .flex-none.w-50p
        img.h-100p.rounded.shadow-3(src="./assets/images/dndmaps.png")
      .flex-auto.flex.items-center.mx-3
        .flex.flex-col.text-3
          .bullet-green.bullet-tick Free
          .bullet-green.bullet-tick Updated daily
          .bullet-green.bullet-tick Amateur and pro quality
          .bullet-green.bullet-tick Great source of inspiration

  +slide
    +title reddit.com/search ðŸ’©
    .flex.h-100p.flex-row
      .flex-none.w-50p
        img.h-100p.rounded.shadow-3(src="./assets/images/redditsearch.png")
      .flex-auto.flex.items-center.mx-3
        .flex.flex-col
          .bullet-red.bullet-cross Slow
          .bullet-red.bullet-cross No typo tolerance
          .bullet-red.bullet-cross Frustrating to use
          .bullet-red.bullet-cross Visually cluttered results

  +slide
    +title api.reddit.com ðŸ¤–
    .flex.h-100p.flex-col
      .flex.p-4.flex-center
        code.code 
          .inline.white api.reddit.com/api/info/
          .inline.gray ?
          .inline.green id
          .inline.gray =
          .inline.blue-5 t3_
          .inline.blue-3 hvjxtn
      .flex.flex-auto.flex-center.bg-gray-9
        .codeblock.language-json.text-1.overflow-hidden.px-1.pb-1
          |{
          |    "id": "hvjxtn",
          |    "title": "Dragonship - A living forest dragon pirate ship - Made in Inkarnate - 44 x 33",
          |    "permalink": "/r/dndmaps/comments/hvjxtn/dragonship_a_living_forest_dragon_pirate_ship/",
          |    "thumbnail": "https://b.thumbs.redditmedia.com/9psU-VI15Vf2AnWG6cJ5SA6djUKoPY4a_IlYo09_9MU.jpg",
          |    "created": 1595408294.0,
          |    "score": 116,
          |    "subreddit": "dndmaps",
          |    "author": "crashgem",
          |    "ups": 116,
          |}

  +slide.bg-blue.flex-center
    .flex.flex-col.white.text-shadow
      .flex-auto.flex.flex-row.text-6
        .flex-none.w-6 Â 
        .flex-none.px-2 ðŸ’Ž
        .flex-none.pl-3 Great data
      .flex-auto.flex.flex-row.text-6
        .flex-none.w-6 -
        .flex-none.px-2 ðŸ’©
        .flex-none.pl-3 Crappy Search
      .flex-auto.flex.flex-row.text-6.border-b-01.border-white
        .flex-none.w-6 +
        .flex-none.px-2 ðŸ¤–
        .flex-none.pl-3 Available API
      .flex-auto.flex.flex-row.text-6(data-step)
        .flex-none.w-6 =
        .flex-none.px-2 ðŸ”Ž
        .flex-none.pl-3.bold Algolia Project

  +slide.bg-blue-7
    a.absolute.inset-0.mt-8.z-0.bg-cover(style="background-image:url('./assets/images/maps.png')", href="https://gamemaster.pixelastic.com/maps/", target="_blank")
    +title 
      a.white(href="https://gamemaster.pixelastic.com/maps/") gamemaster.pixelastic.com/maps/ ðŸ§­

  +slide
    +title 3 major steps
    .flex.flex-col.flex-center.h-100p
      .flex.flex-col.text-5
        .bullet-1.bullet-green Fetching the #[.inline.orange initial] data
        .bullet-2.bullet-green Keeping data #[.inline.orange fresh]
        .bullet-3.bullet-green Building the #[.inline.orange search UI]

  +slide
    +title Fetching the initial data
    .flex.h-100p.flex-row
      .flex-none.w-50p.flex.flex-col.flex-center
        .flex.flex-col
          .flex.justify-center.mb-3
            img.h-10(src="./assets/images/reddit.png")
          .flex.justify-center.mb-3
            code.code api.reddit.com
          .flex.bullet-green.bullet-tick Details of a post
          .flex.bullet-red.bullet-cross History of a subreddit
      .flex-none.w-50p.flex.flex-col.flex-center(data-step)
        .flex.flex-col
          .flex.justify-center.mb-3
            img.h-10(src="./assets/images/pushshift.png")
          .flex.justify-center.mb-3
            code.code api.pushshift.io
          .flex.bullet-red.bullet-cross Details of a post
          .flex.bullet-green.bullet-tick History of a subreddit

  +slide.bg-gray-9
    .flex.flex-row.h-100p
      .flex
        .codeblock.text-1.overflow-hidden.px-1.pb-1.lh-1
          |data
          |â”œâ”€â”€ 2017
          |â”‚Â Â  â”œâ”€â”€ 01
          |â”‚Â Â  â”œâ”€â”€ 02
          |â”‚Â Â  â”œâ”€â”€ 03
          |â”‚   â”‚   â”œâ”€â”€ t3_6a0f2s.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6a0o4n.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6a7au5.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6aex01.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6aype2.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6azfnv.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6b6zev.json
          |â”‚   â”‚   â”œâ”€â”€ t3_6bbdis.json
          |â”‚   â”‚   â””â”€â”€ t3_6bj0y9.json
          |â”‚Â Â  â”œâ”€â”€ 04
          |â”‚Â Â  â”œâ”€â”€ 05
          |â”‚Â Â  â”œâ”€â”€ 06
          |â”‚Â Â  â”œâ”€â”€ 07
          |â”‚Â Â  â”œâ”€â”€ 08
          |â”‚Â Â  â”œâ”€â”€ 09
          |â”‚Â Â  â”œâ”€â”€ 10
          |â”‚Â Â  â”œâ”€â”€ 11
          |â”‚Â Â  â””â”€â”€ 12
          |â”œâ”€â”€ 2018
          |â”‚Â Â  â”œâ”€â”€ 01
          |â”‚Â Â  â”œâ”€â”€ 02
          |â”‚Â Â  â”œâ”€â”€ 03
          |â”‚Â Â  â”œâ”€â”€ 04
          |â”‚Â Â  â”œâ”€â”€ 05
      .flex.flex-center.overflow-hidden.border-l-01.border-gray-8.ml-3.pl-3
        .codeblock.language-json.text-1.overflow-hidden.px-1.pb-1.lh-1
          |{
          |  "id": "t3_hvjxtn",
          |  "title": "Dragonship - A living forest dragon pirate ship - Made in Inkarnate - 44 x 33",
          |  "url": "https://www.reddit.com/r/dndmaps/comments/hvjxtn/dragonship_a_living_forest_dragon_pirate_ship/",
          |  "author": {
          |    "id": "t2_c5ezw",
          |    "name": "crashgem"
          |  },
          |  "picture": {
          |    "full": "https://preview.redd.it/42epgdrp4bc51.jpg?auto=webp&s=515cbdf60a128fbfae0e7c191b60e2b737988a92",
          |    "preview": "https://preview.redd.it/42epgdrp4bc51.jpg?width=640&crop=smart&auto=webp&s=cf1bb269ef5c065da05242b79bc263a4d00553e8",
          |    "thumbnail": "https://b.thumbs.redditmedia.com/9psU-VI15Vf2AnWG6cJ5SA6djUKoPY4a_IlYo09_9MU.jpg"
          |  },
          |  "score": {
          |    "comments": 4,
          |    "downs": 0,
          |    "ratio": 1,
          |    "ups": 110,
          |    "value": 110
          |  },
          |  "tags": ["Vessel"],
          |}

  +slide
    +title Keeping data fresh
    .flex.h-100p.flex-col.items-center
      .flex-auto.flex-col.w-80p
        .text-6.blue.bold.text-shadow Frequency
        .text-3.ml-6 How often do you want to update the data?
        .text-3.ml-9.bullet-arrow.bullet-green.bold(data-step) Every day
      .flex-auto.flex-col.w-80p
        .text-6.orange.bold.text-shadow Quantity
        .text-3.ml-6 How far back do you want to update the data?
        .text-3.ml-9.bullet-arrow.bullet-green.bold(data-step) Up to 7 days


  +slide
    p Front-end
    p Wanted to replicate the Pinterest experience
    p The one where you just wasted 40mn of your time because the scroll never ends and you just want to see a bit more of the next picture
    p Also because interesting CSS challenge to tackle

  +slide
    p Infinite scroll thanks to Algolia InfiniteHits widget
    p Add a "sentinel" at the bottom. When enters the viewport (with delay), loads more results

  +slide
    p Masonry effect
    p CSS grid. Defined a grid of very small increments (like 10px). 
    p Then when a hit is loaded I calculate the number of grid elements it spans and set it in its style
    p This is a hack, and browser do not expect your grid to be that small
    p There is a limit to the number of grid lines you can have
    p When I know I'll reach that limit, I stop loading more element (so not so infinite)

  +slide
    p Open-Source
    p Repo of maps + website is on GitHub
    p Use the JSON data if you want, use it as inspiration to build your own
    p Scripts to download data from reddit and push it to Algolia is packaged as reddinx
    p Code example of the initial or incremental scripts

  +slide
    p Remember, there is tons of data out there
    p Algolia is a great way to make it easier to navigate and open to more people
    p Pick a dataset, dump it into Algolia
    p Everything is better with Search

  +slide
    p Thanks!



